# 留学服务平台测试文档

## 1. 测试目的

确保留学服务平台的各项功能正常运行，验证系统的稳定性、安全性和用户体验，为用户提供可靠的留学服务支持。

## 2. 测试环境

- **前端环境**：Vue.js + Vue Router
- **后端环境**：FastAPI + SQLAlchemy + SQLite
- **开发服务器**：
  - 前端：`npm run dev` (默认端口 5173)
  - 后端：`uvicorn main:app --reload` (默认端口 8000)

## 3. 测试范围

### 3.1 功能测试

- 用户认证与权限管理
- 学生功能模块
- 教师功能模块
- 系统管理功能

### 3.2 API接口测试

- 用户认证接口
- 学生相关接口
- 教师相关接口
- 学校相关接口

### 3.3 性能测试

- 页面加载性能
- API响应性能

## 4. 功能测试用例

### 4.1 用户认证与权限管理

#### 4.1.1 登录功能测试

| 测试用例ID | 测试点         | 输入数据                                                                      | 预期结果                             | 实际结果                               | 状态 |
| ---------- | -------------- | ----------------------------------------------------------------------------- | ------------------------------------ | -------------------------------------- | ---- |
| TC-001     | 学生账号登录   | 用户名：student1 `<br>`密码：password `<br>`角色：学生                    | 登录成功，跳转至学生仪表盘           | 登录成功，成功跳转至学生仪表盘         | 通过 |
| TC-002     | 教师账号登录   | 用户名：teacher1 `<br>`密码：password `<br>`角色：教师                    | 登录成功，跳转至教师仪表盘           | 登录成功，成功跳转至教师仪表盘         | 通过 |
| TC-003     | 无效用户名登录 | 用户名：invalid `<br>`密码：password `<br>`角色：学生                     | 登录失败，提示用户名或密码错误       | 登录失败，正确提示"用户名或密码错误"   | 通过 |
| TC-004     | 无效密码登录   | 用户名：student1 `<br>`密码：wrong `<br>`角色：学生                       | 登录失败，提示用户名或密码错误       | 登录失败，正确提示"用户名或密码错误"   | 通过 |
| TC-005     | 空用户名登录   | 用户名：`<br>`密码：password `<br>`角色：学生                             | 登录失败，提示用户名不能为空         | 登录失败，正确提示"用户名不能为空"     | 通过 |
| TC-006     | 空密码登录     | 用户名：student1 `<br>`密码：`<br>`角色：学生                             | 登录失败，提示密码不能为空           | 登录失败，正确提示"密码不能为空"       | 通过 |
| TC-007     | 记住登录状态   | 用户名：student1 `<br>`密码：password `<br>`角色：学生 `<br>`勾选记住我 | 关闭浏览器后重新打开，仍保持登录状态 | 关闭浏览器重新打开后，成功保持登录状态 | 通过 |

#### 4.1.2 权限验证测试

| 测试用例ID | 测试点               | 操作步骤                      | 预期结果             | 实际结果                 | 状态 |
| ---------- | -------------------- | ----------------------------- | -------------------- | ------------------------ | ---- |
| TC-008     | 学生访问教师页面     | 学生登录后尝试访问教师仪表盘  | 跳转至无权限提示页面 | 成功跳转至无权限提示页面 | 通过 |
| TC-009     | 教师访问学生页面     | 教师登录后尝试访问学生仪表盘  | 跳转至无权限提示页面 | 成功跳转至无权限提示页面 | 通过 |
| TC-010     | 未登录访问受保护页面 | 直接在浏览器输入受保护页面URL | 跳转至登录页面       | 成功跳转至登录页面       | 通过 |

### 4.2 学生功能模块测试

#### 4.2.1 学生个人信息管理

| 测试用例ID | 测试点       | 输入数据                                                  | 预期结果                           | 实际结果 | 状态 |
| ---------- | ------------ | --------------------------------------------------------- | ---------------------------------- | -------- | ---- |
| TC-011     | 查看个人信息 | 登录学生账号，进入个人信息页面                            | 正确显示学生个人信息               |          |      |
| TC-012     | 更新个人信息 | 姓名：张三 `<br>`年龄：22 `<br>`联系方式：13800138000 | 更新成功，信息显示最新内容         |          |      |
| TC-013     | 无效年龄更新 | 年龄：14（小于最低限制）                                  | 更新失败，提示年龄必须在15-40之间  |          |      |
| TC-014     | 更新GPA信息  | GPA：3.8                                                  | 更新成功，GPA显示为3.8             |          |      |
| TC-015     | 无效GPA更新  | GPA：4.5（大于最高限制）                                  | 更新失败，提示GPA必须在0.0-4.0之间 |          |      |

#### 4.2.2 学校推荐功能

| 测试用例ID | 测试点           | 输入数据                              | 预期结果                                 | 实际结果 | 状态 |
| ---------- | ---------------- | ------------------------------------- | ---------------------------------------- | -------- | ---- |
| TC-016     | 基于GPA推荐学校  | GPA：3.5 `<br>`期望专业：计算机科学 | 返回匹配的推荐学校列表，按推荐系数排序   |          |      |
| TC-017     | 基于英语成绩推荐 | 雅思：7.0 `<br>`托福：95            | 返回匹配的推荐学校列表，按推荐系数排序   |          |      |
| TC-018     | 低成绩推荐       | GPA：2.0 `<br>`雅思：5.5            | 返回少量匹配度较低的学校，或提示提升成绩 |          |      |
| TC-019     | 推荐结果详情查看 | 点击推荐列表中的学校                  | 显示学校详细信息，包括推荐系数说明       |          |      |

#### 4.2.3 学校查询功能

| 测试用例ID | 测试点         | 输入数据               | 预期结果                         | 实际结果 | 状态 |
| ---------- | -------------- | ---------------------- | -------------------------------- | -------- | ---- |
| TC-020     | 获取学校列表   | 访问学校库页面         | 显示所有学校列表，包含基本信息   |          |      |
| TC-021     | 按名称搜索学校 | 搜索关键词：哈佛大学   | 返回包含"哈佛大学"的搜索结果     |          |      |
| TC-023     | 查看学校详情   | 点击任意学校进入详情页 | 显示学校的详细信息，包括专业设置 |          |      |

#### 4.2.4 语言培训预约

| 测试用例ID | 测试点       | 输入数据                                                                                             | 预期结果                       | 实际结果 | 状态 |
| ---------- | ------------ | ---------------------------------------------------------------------------------------------------- | ------------------------------ | -------- | ---- |
| TC-024     | 创建培训预约 | 培训类型：雅思 `<br>`预约日期：2023-12-20 `<br>`预约时间：14:00-16:00 `<br>`备注：希望加强口语 | 预约成功，返回预约ID           |          |      |
| TC-025     | 查看预约列表 | 访问预约管理页面                                                                                     | 显示所有历史预约，包含状态信息 |          |      |
| TC-026     | 查看预约详情 | 点击预约记录进入详情                                                                                 | 显示预约的详细信息和状态       |          |      |
| TC-027     | 取消预约     | 选择未开始的预约，点击取消                                                                           | 预约状态变为已取消             |          |      |

### 4.3 教师功能模块测试

#### 4.3.1 教师个人信息管理

| 测试用例ID | 测试点       | 输入数据                                                        | 预期结果                   | 实际结果 | 状态 |
| ---------- | ------------ | --------------------------------------------------------------- | -------------------------- | -------- | ---- |
| TC-032     | 查看教师信息 | 登录教师账号，进入个人信息页面                                  | 正确显示教师个人信息       |          |      |
| TC-033     | 更新教师信息 | 姓名：李老师 `<br>`专业领域：计算机科学 `<br>`教学经验：5年 | 更新成功，信息显示最新内容 |          |      |
| TC-034     | 更新教学时间 | 可用时间：周一至周五 9:00-18:00                                 | 更新成功，可用时间更新     |          |      |

#### 4.3.2 学生管理功能

| 测试用例ID | 测试点       | 操作步骤             | 预期结果                       | 实际结果 | 状态 |
| ---------- | ------------ | -------------------- | ------------------------------ | -------- | ---- |
| TC-035     | 查看学生列表 | 访问学生管理页面     | 显示所有学生列表，包含基本信息 |          |      |
| TC-036     | 搜索学生     | 输入学生姓名或ID搜索 | 返回匹配的学生记录             |          |      |
| TC-037     | 查看学生详情 | 点击学生记录进入详情 | 显示学生完整档案和历史记录     |          |      |
| TC-038     | 更新学生评估 | 添加评估意见和建议   | 评估信息保存成功               |          |      |

#### 4.3.3 留学成功率预测

| 测试用例ID | 测试点            | 输入数据                                                               | 预期结果                     | 实际结果 | 状态 |
| ---------- | ----------------- | ---------------------------------------------------------------------- | ---------------------------- | -------- | ---- |
| TC-039     | 基于GPA预测成功率 | GPA：3.7 `<br>`目标院校：常春藤盟校                                  | 返回预测成功率和分析报告     |          |      |
| TC-040     | 基于语言成绩预测  | 雅思：7.5 `<br>`托福：110                                            | 返回预测成功率和分析报告     |          |      |
| TC-041     | 综合条件预测      | GPA：3.6 `<br>`雅思：7.0 `<br>`推荐信数量：3 `<br>`实习经历：2年 | 返回综合预测成功率和详细分析 |          |      |

#### 4.3.4 培训预约管理

| 测试用例ID | 测试点         | 操作步骤                     | 预期结果                         | 实际结果 | 状态 |
| ---------- | -------------- | ---------------------------- | -------------------------------- | -------- | ---- |
| TC-042     | 查看待处理预约 | 访问教师预约管理页面         | 显示待处理的学生预约列表         |          |      |
| TC-043     | 接受培训预约   | 选择预约，点击接受           | 预约状态变为已确认               |          |      |
| TC-044     | 拒绝培训预约   | 选择预约，点击拒绝并填写原因 | 预约状态变为已拒绝，学生收到通知 |          |      |
| TC-045     | 更新培训状态   | 培训完成后更新状态和备注     | 培训状态更新为已完成             |          |      |

### 4.4 系统管理功能测试

#### 4.4.1 学校信息管理

| 测试用例ID | 测试点           | 输入数据                                                                          | 预期结果               | 实际结果 | 状态 |
| ---------- | ---------------- | --------------------------------------------------------------------------------- | ---------------------- | -------- | ---- |
| TC-050     | 创建新学校信息   | 学校名称：测试大学 `<br>`国家：中国 `<br>`排名：50 `<br>`简介：测试大学简介 | 学校信息创建成功       |          |      |
| TC-051     | 更新学校信息     | 修改排名为45                                                                      | 更新成功，排名显示为45 |          |      |
| TC-052     | 查看学校详细信息 | 点击学校记录查看详情                                                              | 显示完整的学校信息     |          |      |
| TC-053     | 删除学校信息     | 选择学校，点击删除                                                                | 学校信息从列表中移除   |          |      |

## 5. API接口测试用例

### 5.1 用户认证接口

#### 5.1.1 登录接口

| 测试用例ID | API路径     | 方法 | 请求体                                                                  | 预期响应                                                                                        | 实际结果                               | 状态 |
| ---------- | ----------- | ---- | ----------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------- | -------------------------------------- | ---- |
| API-001    | /auth/login | POST | `{"username": "student1", "password": "password", "role": "student"}` | 200 OK `<br>{"access_token": "...", "token_type": "bearer", "user": {...}}`                   | 200 OK，成功返回token和用户信息        | 通过 |
| API-002    | /auth/login | POST | `{"username": "invalid", "password": "password", "role": "student"}`  | 401 Unauthorized `<br>{"detail": "用户名或密码错误"}`                                         | 401 Unauthorized，正确返回错误信息     | 通过 |
| API-003    | /auth/login | POST | `{"username": "student1", "password": "", "role": "student"}`         | 422 Validation Error `<br>{"detail": [{"loc": ["body", "password"], "msg": "密码不能为空"}]}` | 422 Validation Error，正确返回验证错误 | 通过 |

#### 5.1.2 登出接口

| 测试用例ID | API路径      | 方法 | 请求头                              | 预期响应                                              | 实际结果                                     | 状态 |
| ---------- | ------------ | ---- | ----------------------------------- | ----------------------------------------------------- | -------------------------------------------- | ---- |
| API-004    | /auth/logout | POST | Authorization: Bearer {token}       | 200 OK `<br>{"message": "登出成功"}`                | 200 OK，成功登出                             | 通过 |
| API-005    | /auth/logout | POST | Authorization: Bearer invalid_token | 401 Unauthorized `<br>{"detail": "无效的认证凭据"}` | 401 Unauthorized，但返回的错误信息格式不一致 | 失败 |

### 5.2 学生相关接口

#### 5.2.1 学生信息接口

| 测试用例ID | API路径          | 方法 | 请求头                                                                     | 预期响应                                                 | 实际结果 | 状态 |
| ---------- | ---------------- | ---- | -------------------------------------------------------------------------- | -------------------------------------------------------- | -------- | ---- |
| API-006    | /student/profile | GET  | Authorization: Bearer {token}                                              | 200 OK `<br>{"id": 1, "name": "...", "age": 22, ...}`  |          |      |
| API-007    | /student/profile | PUT  | Authorization: Bearer {token}`<br>`Body: `{"name": "张三", "age": 22}` | 200 OK `<br>{"id": 1, "name": "张三", "age": 22, ...}` |          |      |

#### 5.2.2 学校推荐接口

| 测试用例ID | API路径                  | 方法 | 请求头                        | 查询参数                 | 预期响应                                                                                   | 实际结果 | 状态 |
| ---------- | ------------------------ | ---- | ----------------------------- | ------------------------ | ------------------------------------------------------------------------------------------ | -------- | ---- |
| API-008    | /student/recommendations | GET  | Authorization: Bearer {token} | gpa=3.5&major=计算机科学 | 200 OK `<br>[{"school_id": 1, "school_name": "...", "recommendation_score": 0.85, ...}]` |          |      |
| API-009    | /student/recommendations | GET  | Authorization: Bearer {token} | ielts=7.0                | 200 OK `<br>[{"school_id": 2, "school_name": "...", "recommendation_score": 0.78, ...}]` |          |      |

#### 5.2.3 预约接口

| 测试用例ID | API路径                            | 方法   | 请求头                        | 请求体                                                                                             | 预期响应                                                                      | 实际结果 | 状态 |
| ---------- | ---------------------------------- | ------ | ----------------------------- | -------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------- | -------- | ---- |
| API-010    | /student/training-reservation      | POST   | Authorization: Bearer {token} | `{"training_type": "雅思", "reservation_date": "2023-12-20", "reservation_time": "14:00-16:00"}` | 201 Created `<br>{"id": 1, "status": "pending", ...}`                       |          |      |
| API-011    | /student/training-reservations     | GET    | Authorization: Bearer {token} |                                                                                                    | 200 OK `<br>[{"id": 1, "training_type": "雅思", "status": "pending", ...}]` |          |      |
| API-012    | /student/training-reservation/{id} | DELETE | Authorization: Bearer {token} |                                                                                                    | 200 OK `<br>{"message": "预约已取消"}`                                      |          |      |

### 5.3 教师相关接口

#### 5.3.1 教师信息接口

| 测试用例ID | API路径          | 方法 | 请求头                                                                                      | 预期响应                                                                        | 实际结果 | 状态 |
| ---------- | ---------------- | ---- | ------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- | -------- | ---- |
| API-013    | /teacher/profile | GET  | Authorization: Bearer {token}                                                               | 200 OK `<br>{"id": 1, "name": "李老师", "specialization": "计算机科学", ...}` |          |      |
| API-014    | /teacher/profile | PUT  | Authorization: Bearer {token}`<br>`Body: `{"name": "李教授", "teaching_experience": 6}` | 200 OK `<br>{"id": 1, "name": "李教授", "teaching_experience": 6, ...}`       |          |      |

#### 5.3.2 学生管理接口

| 测试用例ID | API路径               | 方法 | 请求头                        | 查询参数  | 预期响应                                                                          | 实际结果 | 状态 |
| ---------- | --------------------- | ---- | ----------------------------- | --------- | --------------------------------------------------------------------------------- | -------- | ---- |
| API-015    | /teacher/students     | GET  | Authorization: Bearer {token} |           | 200 OK `<br>[{"id": 1, "name": "张三", "gpa": 3.5, ...}]`                       |          |      |
| API-016    | /teacher/students     | GET  | Authorization: Bearer {token} | search=张 | 200 OK `<br>[{"id": 1, "name": "张三", ...}]`                                   |          |      |
| API-017    | /teacher/student/{id} | GET  | Authorization: Bearer {token} |           | 200 OK `<br>{"id": 1, "name": "张三", "profile": {...}, "reservations": [...]}` |          |      |

#### 5.3.3 预测接口

| 测试用例ID | API路径                       | 方法 | 请求头                        | 请求体                                                           | 预期响应                                               | 实际结果 | 状态 |
| ---------- | ----------------------------- | ---- | ----------------------------- | ---------------------------------------------------------------- | ------------------------------------------------------ | -------- | ---- |
| API-018    | /teacher/predict-success-rate | POST | Authorization: Bearer {token} | `{"student_id": 1, "gpa": 3.7, "target_school": "常春藤盟校"}` | 200 OK `<br>{"prediction": 0.75, "analysis": "..."}` |          |      |

### 5.4 学校相关接口

| 测试用例ID | API路径       | 方法   | 请求头                              | 预期响应                                                                            | 实际结果                                                       | 状态 |
| ---------- | ------------- | ------ | ----------------------------------- | ----------------------------------------------------------------------------------- | -------------------------------------------------------------- | ---- |
| API-019    | /schools      | GET    |                                     | 200 OK `<br>[{"id": 1, "name": "哈佛大学", "country": "美国", "rank": 1, ...}]`   |                                                                |      |
| API-020    | /schools/{id} | GET    |                                     | 200 OK `<br>{"id": 1, "name": "哈佛大学", "description": "...", "majors": [...]}` |                                                                |      |
| API-021    | /schools      | POST   | Authorization: Bearer {admin_token} | `{"name": "测试大学", "country": "中国", "rank": 50}`                             | 201 Created `<br>{"id": 10, "name": "测试大学", ...}`        |      |
| API-022    | /schools/{id} | PUT    | Authorization: Bearer {admin_token} | `{"rank": 45}`                                                                    | 200 OK `<br>{"id": 10, "name": "测试大学", "rank": 45, ...}` |      |
| API-023    | /schools/{id} | DELETE | Authorization: Bearer {admin_token} |                                                                                     | 200 OK `<br>{"message": "学校信息已删除"}`                   |      |

## 6. 测试环境配置

### 6.1 后端环境配置

1. 确保已安装Python 3.8+
2. 进入后端目录：`cd backend`
3. 安装依赖：`pip install -r requirements.txt`
4. 启动开发服务器：`uvicorn main:app --reload`

### 6.2 前端环境配置

1. 确保已安装Node.js 14+
2. 进入前端目录：`cd frontend`
3. 安装依赖：`npm install`
4. 启动开发服务器：`npm run dev`

### 6.3 测试账号配置

#### 学生账号

- 用户名：student1
- 密码：password
- 角色：学生

#### 教师账号

- 用户名：teacher1
- 密码：password
- 角色：教师

## 7. 测试执行计划

### 7.1 测试执行顺序

1. 环境配置测试
2. 功能测试（按模块顺序执行）
3. API接口测试
4. 综合场景测试
5. 性能测试

### 7.2 测试验收标准

- 所有功能测试用例通过率达到100%
- API接口测试用例通过率达到100%
- 不存在严重或阻断性bug
- 系统在规定负载下性能符合要求

## 8. 测试报告模板

### 8.1 测试概况

- 测试环境
- 测试时间
- 测试范围
- 测试人员

### 8.2 测试结果统计

| 测试类型 | 总用例数 | 通过率 | 失败率 | 未执行 |
| -------- | -------- | ------ | ------ | ------ |
| 功能测试 |          |        |        |        |
| API测试  |          |        |        |        |
| 性能测试 |          |        |        |        |

### 8.3 问题汇总


### 8.4 测试结论与建议

- 测试结论
- 存在问题
- 改进建议

## 9. 注意事项

1. 测试前确保数据库已正确初始化
2. 测试过程中注意数据的隔离性，避免测试数据影响其他测试
3. 测试完成后清理测试数据
4. 对于API测试，使用合适的测试工具如Postman或自动化测试框架
5. 对于性能测试，确保测试环境与生产环境配置一致

## 10. 附录

### 10.1 测试工具推荐

- 功能测试：Cypress、Playwright
- API测试：Postman、pytest + requests
- 性能测试：JMeter、Locust

### 10.2 常用测试命令

```bash
# 后端API测试（假设使用pytest）
pytest tests/

# 前端单元测试
cd frontend
npm test

# 前端E2E测试
cd frontend
npm run test:e2e
```
